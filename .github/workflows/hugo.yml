name: Hugo

on: [push]


# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write


jobs:
  build:
    strategy:
        matrix:
          image: [ext-ubuntu]

          
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - name: hugo
      uses: klakegg/actions-hugo@1.0.0
      with:
        image: ${{ matrix.image }}

    - name: Copy output dir contents to live gh-pages branch
      uses: s0/git-publish-subdir-action@develop

      env:
        REPO: self
        BRANCH: gh-pages # The branch name where you want to push the output
        FOLDER: docs # The directory where output is generated
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} # GitHub will automatically add this - you don't need to bother getting a token
        MESSAGE: "Build: ({sha}) {msg}" # The commit message
    - run: echo "üçè This job's status is ${{ job.status }}."
      